# this file is part of Sage
# (c) 2013 Felix Salfelder
# license: gplv3+
#
libs_singulardir = $(pythondir)/sage/libs/singular
include $(top_srcdir)/common.mk
libs_singular_PYTHON = __init__.py function_factory.py

libs_singular_LTLIBRARIES = function.la groebner_strategy.la option.la polynomial.la ring.la singular.la 
function_la_LIBADD = -lm -lreadline -lsingular -lgivaro -lntl -lgmpxx -lgmp -lcsage
function.cc: @srcdir@/function.pyx
function_la_CPPFLAGS = $(AM_CPPFLAGS) -I@SAGE_INC@/singular -I@SAGE_INC@/factory \
                       -D__STDC_LIMIT_MACROS

groebner_strategy_la_LIBADD = -lm -lreadline -lsingular -lgivaro -lntl -lgmpxx -lgmp
groebner_strategy.cc: @srcdir@/groebner_strategy.pyx
groebner_strategy_la_CXXFLAGS = -D__STDC_LIMIT_MACROS $(AM_CXXFLAGS)
groebner_strategy_la_CPPFLAGS = -I@SAGE_INC@/singular -I@SAGE_INC@/factory $(AM_CPPFLAGS)
option_la_LIBADD = -lm -lreadline -lsingular -lgivaro -lntl -lgmpxx -lgmp
option.cc: @srcdir@/option.pyx
option_la_CXXFLAGS = -D__STDC_LIMIT_MACROS $(AM_CXXFLAGS)
option_la_CPPFLAGS = -I@SAGE_INC@/singular -I@SAGE_INC@/factory $(AM_CPPFLAGS)
polynomial_la_LIBADD = -lm -lreadline -lsingular -lgivaro -lntl -lgmpxx -lgmp -lcsage
polynomial.cc: @srcdir@/polynomial.pyx
polynomial_la_CPPFLAGS = $(AM_CPPFLAGS) -I@SAGE_INC@/singular -I@SAGE_INC@/factory \
                         -D__STDC_LIMIT_MACROS

ring_la_LIBADD = -lm -lreadline -lsingular -lgivaro -lntl -lgmpxx -lgmp -lcsage
ring.cc: @srcdir@/ring.pyx
ring_la_CPPFLAGS = $(AM_CPPFLAGS) -I@SAGE_INC@/singular -I@SAGE_INC@/factory \
                   -D__STDC_LIMIT_MACROS

singular_la_LIBADD = -lm -lreadline -lsingular -lgivaro -lntl -lgmpxx -lgmp -lcsage
singular.cc: @srcdir@/singular.pyx
singular_la_CXXFLAGS = -D__STDC_LIMIT_MACROS $(AM_CXXFLAGS)
singular_la_CPPFLAGS = -I@SAGE_INC@/singular -I@SAGE_INC@/factory $(AM_CPPFLAGS)
.pyx.cc:
	$(cython_call)

# FIXME: something extremely wrong
function_la_CPPFLAGS += -DNDEBUG
polynomial_la_CPPFLAGS += -DNDEBUG
ring_la_CPPFLAGS += -DNDEBUG
groebner_strategy_la_CPPFLAGS += -DNDEBUG
